(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6f95"],{Gedb:function(t,e,n){"use strict";function r(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,r,i,o,a;return i=2147483648&t,o=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(r=1073741824&e)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function r(t,r,i,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t&e|~t&n}(r,i,o),a),u)),s),r)}function i(t,r,i,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t&n|e&~n}(r,i,o),a),u)),s),r)}function o(t,r,i,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t^e^n}(r,i,o),a),u)),s),r)}function a(t,r,i,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return e^(t|~n)}(r,i,o),a),u)),s),r)}function s(t){var e,n="",r="";for(e=0;e<=3;e++)n+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return n}var u,c,l,d,f,m,p,b,h,g;for(u=function(t){for(var e,n=t.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,s=0;s<n;)a=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<a,s++;return a=s%4*8,o[e=(s-s%4)/4]=o[e]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o}(t),p=1732584193,b=4023233417,h=2562383102,g=271733878,c=0;c<u.length;c+=16)l=p,d=b,f=h,m=g,b=a(b=a(b=a(b=a(b=o(b=o(b=o(b=o(b=i(b=i(b=i(b=i(b=r(b=r(b=r(b=r(b,h=r(h,g=r(g,p=r(p,b,h,g,u[c+0],7,3614090360),b,h,u[c+1],12,3905402710),p,b,u[c+2],17,606105819),g,p,u[c+3],22,3250441966),h=r(h,g=r(g,p=r(p,b,h,g,u[c+4],7,4118548399),b,h,u[c+5],12,1200080426),p,b,u[c+6],17,2821735955),g,p,u[c+7],22,4249261313),h=r(h,g=r(g,p=r(p,b,h,g,u[c+8],7,1770035416),b,h,u[c+9],12,2336552879),p,b,u[c+10],17,4294925233),g,p,u[c+11],22,2304563134),h=r(h,g=r(g,p=r(p,b,h,g,u[c+12],7,1804603682),b,h,u[c+13],12,4254626195),p,b,u[c+14],17,2792965006),g,p,u[c+15],22,1236535329),h=i(h,g=i(g,p=i(p,b,h,g,u[c+1],5,4129170786),b,h,u[c+6],9,3225465664),p,b,u[c+11],14,643717713),g,p,u[c+0],20,3921069994),h=i(h,g=i(g,p=i(p,b,h,g,u[c+5],5,3593408605),b,h,u[c+10],9,38016083),p,b,u[c+15],14,3634488961),g,p,u[c+4],20,3889429448),h=i(h,g=i(g,p=i(p,b,h,g,u[c+9],5,568446438),b,h,u[c+14],9,3275163606),p,b,u[c+3],14,4107603335),g,p,u[c+8],20,1163531501),h=i(h,g=i(g,p=i(p,b,h,g,u[c+13],5,2850285829),b,h,u[c+2],9,4243563512),p,b,u[c+7],14,1735328473),g,p,u[c+12],20,2368359562),h=o(h,g=o(g,p=o(p,b,h,g,u[c+5],4,4294588738),b,h,u[c+8],11,2272392833),p,b,u[c+11],16,1839030562),g,p,u[c+14],23,4259657740),h=o(h,g=o(g,p=o(p,b,h,g,u[c+1],4,2763975236),b,h,u[c+4],11,1272893353),p,b,u[c+7],16,4139469664),g,p,u[c+10],23,3200236656),h=o(h,g=o(g,p=o(p,b,h,g,u[c+13],4,681279174),b,h,u[c+0],11,3936430074),p,b,u[c+3],16,3572445317),g,p,u[c+6],23,76029189),h=o(h,g=o(g,p=o(p,b,h,g,u[c+9],4,3654602809),b,h,u[c+12],11,3873151461),p,b,u[c+15],16,530742520),g,p,u[c+2],23,3299628645),h=a(h,g=a(g,p=a(p,b,h,g,u[c+0],6,4096336452),b,h,u[c+7],10,1126891415),p,b,u[c+14],15,2878612391),g,p,u[c+5],21,4237533241),h=a(h,g=a(g,p=a(p,b,h,g,u[c+12],6,1700485571),b,h,u[c+3],10,2399980690),p,b,u[c+10],15,4293915773),g,p,u[c+1],21,2240044497),h=a(h,g=a(g,p=a(p,b,h,g,u[c+8],6,1873313359),b,h,u[c+15],10,4264355552),p,b,u[c+6],15,2734768916),g,p,u[c+13],21,1309151649),h=a(h,g=a(g,p=a(p,b,h,g,u[c+4],6,4149444226),b,h,u[c+11],10,3174756917),p,b,u[c+2],15,718787259),g,p,u[c+9],21,3951481745),p=n(p,l),b=n(b,d),h=n(h,f),g=n(g,m);return(s(p)+s(b)+s(h)+s(g)).toLowerCase()}n.d(e,"a",function(){return r})},VVgF:function(t,e,n){},Yfch:function(t,e,n){"use strict";function r(t){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(t)}function i(t){return/^1[3|4|5|7|8][0-9]\d{8}$/.test(t)}function o(t){return/^[a-zA-Z0-9_]+$/g.test(t)}n.d(e,"c",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o})},fXEF:function(t,e,n){"use strict";var r=n("VVgF");n.n(r).a},q4Ke:function(t,e,n){"use strict";n.r(e);var r=n("Q2AE"),i=n("Gedb"),o=n("Yfch"),a=n("wk8/"),s=n("t3Un");var u={props:{email:{type:String,required:!0}},data:function(){var t=this;return{loading:!1,dialog:!1,title:"修改邮箱",form:{pass:"",email:"",code:""},user:{email:"",password:""},codeLoading:!1,codeData:{type:"email",value:""},buttonName:"获取验证码",isDisabled:!1,time:60,rules:{pass:[{required:!0,validator:function(t,e,n){Object(a.f)(Object(i.a)(e)).then(function(t){200===t.status?n():n(new Error("密码错误，请重新输入"))})},trigger:"blur"}],email:[{required:!0,validator:function(e,n,r){""===n?r(new Error("新邮箱不能为空")):n===t.email?r(new Error("新邮箱不能与旧邮箱相同")):Object(o.c)(n)?r():r(new Error("邮箱格式错误"))},trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},sendCode:function(){var t=this;if(this.form.email&&this.form.email!==this.email){this.codeLoading=!0,this.buttonName="验证码发送中",this.codeData.value=this.form.email;var e=this;(function(t){return Object(s.a)({url:"api/code/resetEmail",method:"post",data:t})})(this.codeData).then(function(n){t.$message({showClose:!0,message:"发送成功，验证码有效期5分钟",type:"success"}),t.codeLoading=!1,t.isDisabled=!0,t.buttonName=t.time--+"秒后重新发送",t.timer=window.setInterval(function(){e.buttonName=e.time+"秒后重新发送",--e.time,e.time<0&&(e.buttonName="重新发送",e.time=60,e.isDisabled=!1,window.clearInterval(e.timer))},1e3)}).catch(function(e){t.resetForm(),t.codeLoading=!1,console.log(e)})}},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0,t.user={email:t.form.email,password:Object(i.a)(t.form.pass)},Object(a.d)(t.form.code,t.user).then(function(e){t.loading=!1,t.resetForm(),t.$notify({title:"邮箱修改成功",type:"success",duration:1500}),r.a.dispatch("GetInfo").then(function(){})}).catch(function(e){t.loading=!1,console.log(e)})})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName="获取验证码",this.isDisabled=!1,this.form={pass:"",email:"",code:""}}}},c=(n("fXEF"),n("KHd+")),l=Object(c.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-block"}},[n("el-button",{staticClass:"button",attrs:{size:"mini",type:"info"},on:{click:function(e){t.dialog=!0}}},[t._v("修改")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialog,title:t.title,width:"475px"},on:{"update:visible":function(e){t.dialog=e},close:t.cancel}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,size:"small","label-width":"88px"}},[n("el-form-item",{attrs:{label:"新邮箱",prop:"email"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"on"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),n("el-button",{attrs:{loading:t.codeLoading,disabled:t.isDisabled,size:"small"},on:{click:t.sendCode}},[t._v(t._s(t.buttonName))])],1),t._v(" "),n("el-form-item",{attrs:{label:"验证码",prop:"code"}},[n("el-input",{staticStyle:{width:"320px"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"当前密码",prop:"pass"}},[n("el-input",{staticStyle:{width:"320px"},attrs:{type:"password"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.doSubmit}},[t._v("确认")])],1)],1)],1)},[],!1,null,"2ef9b4e5",null);l.options.__file="updateEmail.vue";e.default=l.exports},"wk8/":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"f",function(){return s}),n.d(e,"e",function(){return u}),n.d(e,"d",function(){return c});var r=n("t3Un");function i(t){return Object(r.a)({url:"api/users/",method:"post",data:t})}function o(t){return Object(r.a)({url:"api/users/"+t+"/",method:"delete"})}function a(t,e){return Object(r.a)({url:"api/users/"+t+"/",method:"put",data:e})}function s(t){return Object(r.a)({url:"api/users/validPass/"+t,method:"get"})}function u(t){return Object(r.a)({url:"api/users/updatePass/"+t,method:"get"})}function c(t,e){return Object(r.a)({url:"api/users/updateEmail/"+t,method:"post",data:e})}}}]);