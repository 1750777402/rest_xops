(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2a3a"],{"4EWQ":function(e,t,s){"use strict";var a=s("JzQD");s.n(a).a},"8A5h":function(e,t,s){"use strict";s.r(t);var a=s("41Be"),n=s("mWUm"),i=s("OWId"),l={name:"Tab",components:{Base:n.default,Passwd:i.default},data:function(){return{activeName:"first",dialog:!1,loading:!1}},methods:{checkPermission:a.a,handleClick:function(){"fourth"===this.activeName&&(this.$refs.form_passwd.host=this.$refs.form_base.form_base.hostname,this.$refs.form_passwd.pinit())}}},o=(s("4EWQ"),s("KHd+")),r=Object(o.a)(l,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-container"},[s("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"设备信息",name:"first"}},[s("Base",{ref:"form_base"})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"变更记录",name:"second"}}),e._v(" "),s("el-tab-pane",{attrs:{label:"附加信息",name:"third"}}),e._v(" "),e.checkPermission(["admin","connection_all","connection_list"])?s("el-tab-pane",{attrs:{label:"密码信息",name:"fourth"}},[s("Passwd",{ref:"form_passwd"})],1):e._e()],1)],1)},[],!1,null,"99df1e5c",null);r.options.__file="index.vue";t.default=r.exports},JzQD:function(e,t,s){},K22w:function(e,t,s){"use strict";s.d(t,"d",function(){return n}),s.d(t,"a",function(){return i}),s.d(t,"b",function(){return l}),s.d(t,"c",function(){return o});var a=s("t3Un");function n(){return Object(a.a)({url:"api/business/tree/",method:"get"})}function i(e){return Object(a.a)({url:"api/businesses/",method:"post",data:e})}function l(e){return Object(a.a)({url:"api/businesses/"+e+"/",method:"delete"})}function o(e,t){return Object(a.a)({url:"api/businesses/"+e+"/",method:"put",data:t})}},mWUm:function(e,t,s){"use strict";s.r(t);var a=s("41Be"),n=s("cCY5"),i=s.n(n),l=(s("VCwm"),s("twU4")),o=s("qpgI"),r=s("K22w"),c=s("7Qib"),m={name:"Base",components:{Treeselect:i.a},data:function(){return{loading:!1,button:"edit",form_base:{id:"",add_time:"",modify_time:"",hostname:"",auth_type:"",status:"",sys_hostname:"",mac_address:"",sn_number:"",os_version:"",os_type:"",device_type:"",businesses:[],error_message:""},businesstree:[],businessIds:[],is_Readonly:!0,types:[{value:"password",label:"密码认证"},{value:"key_filename",label:"密钥认证"}],os_types:[{value:"Linux",label:"Linux系统"},{value:"Other",label:"其他系统"}],device_types:[{key:"VM",value:"虚拟机"},{key:"key",value:"物理机"}],rules:{hostname:[{required:!0,message:"请输入主机地址",trigger:"blur"}]}}},created:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{checkPermission:a.a,init:function(){var e=this;Object(o.d)(this.$route.query.id).then(function(t){e.form_base=t,e.form_base.add_time=Object(c.b)(e.form_base.add_time),e.form_base.modify_time=Object(c.b)(e.form_base.modify_time),e.businessIds=e.form_base.businesses}),Object(l.e)("DEVICE_TYPE").then(function(t){e.device_types=t[0].DEVICE_TYPE}),this.getBusinesses()},closeTag:function(){this.$store.dispatch("delView",this.$store.state.tagsView.visitedViews.slice(-1)[0]),this.$router.go(-1)},cancel:function(){this.button="edit",this.is_Readonly=!0},edit:function(){this.button="save",this.is_Readonly=!1},doSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.form_base.businesses=[];var s=e;e.businessIds.forEach(function(e,t){s.form_base.businesses.push(e)}),e.loading=!0,Object(o.b)(e.form_base.id,e.form_base).then(function(t){e.resetForm(),e.$message({showClose:!0,type:"success",message:"修改成功!",duration:2500}),e.loading=!1,e.button="edit",e.init()}).catch(function(t){e.loading=!1,console.log(t.response.data.detail)})}})},resetForm:function(){this.form_base={id:"",add_time:"",modify_time:"",hostname:"",port:"",username:"",password:"",key_filename:"",auth_type:"",status:"",sys_hostname:"",mac_address:"",sn_number:"",os_version:"",os_type:"",device_type:"",businesses:[],error_message:""},this.businessIds=[]},getBusinesses:function(){var e=this;Object(r.d)().then(function(t){e.businesstree=t})}}},u=(s("vnca"),s("KHd+")),d=Object(u.a)(m,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{staticClass:"warn-content"},[e._v("基础信息")]),e._v(" "),s("el-form",{ref:"form",attrs:{model:e.form_base,rules:e.rules,size:"small","label-width":"80px"}},[s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"主机名"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.sys_hostname,callback:function(t){e.$set(e.form_base,"sys_hostname",t)},expression:"form_base.sys_hostname"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"IP/域名",prop:"hostname"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.hostname,callback:function(t){e.$set(e.form_base,"hostname",t)},expression:"form_base.hostname"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"认证类型"}},[s("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择认证类型"},model:{value:e.form_base.auth_type,callback:function(t){e.$set(e.form_base,"auth_type",t)},expression:"form_base.auth_type"}},e._l(e.types,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"系统类型"}},[s("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择认证类型"},model:{value:e.form_base.os_type,callback:function(t){e.$set(e.form_base,"os_type",t)},expression:"form_base.os_type"}},e._l(e.os_types,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"SN编号"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.sn_number,callback:function(t){e.$set(e.form_base,"sn_number",t)},expression:"form_base.sn_number"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"系统版本"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.os_version,callback:function(t){e.$set(e.form_base,"os_version",t)},expression:"form_base.os_version"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"设备类型"}},[s("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.is_Readonly,placeholder:"请选择设备类型"},model:{value:e.form_base.device_type,callback:function(t){e.$set(e.form_base,"device_type",t)},expression:"form_base.device_type"}},e._l(e.device_types,function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"MAC地址"}},[s("el-input",{staticStyle:{width:"300px"},attrs:{readonly:e.is_Readonly},model:{value:e.form_base.mac_address,callback:function(t){e.$set(e.form_base,"mac_address",t)},expression:"form_base.mac_address"}})],1)],1)],1),e._v(" "),s("el-row",[s("el-form-item",{attrs:{label:"关联业务"}},[s("treeselect",{staticStyle:{width:"300px"},attrs:{multiple:!0,options:e.businesstree,"disable-branch-nodes":!0,placeholder:"请选择业务"},model:{value:e.businessIds,callback:function(t){e.businessIds=t},expression:"businessIds"}})],1)],1),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"入库时间"}},[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.form_base.add_time))])])],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"变更时间"}},[s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.form_base.modify_time))])])],1)],1),e._v(" "),s("el-row",[e.form_base.error_message?s("el-form-item",{attrs:{label:"错误信息"}},[s("el-input",{staticStyle:{width:"720px"},attrs:{readonly:e.is_Readonly,type:"textarea"},model:{value:e.form_base.error_message,callback:function(t){e.$set(e.form_base,"error_message",t)},expression:"form_base.error_message"}})],1):e._e()],1),e._v(" "),s("el-form-item",[s("div",{staticStyle:{display:"inline-block",margin:"20px 0px",float:"left"}},[e.checkPermission(["admin","asset_all","asset_edit"])&&"edit"==e.button?s("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"save"==e.button?s("el-button",{attrs:{type:"success"},on:{click:e.doSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"save"==e.button?s("el-button",{attrs:{type:"warning"},on:{click:e.cancel}},[e._v("取消")]):e._e(),e._v(" "),e.checkPermission(["admin","asset_all","asset_edit"])&&"edit"==e.button?s("el-button",{on:{click:e.closeTag}},[e._v("返回")]):e._e()],1)])],1),e._v(" "),s("p",{staticClass:"warn-content"},[e._v("配置信息")]),e._v(" "),s("el-row",[s("el-col",{attrs:{span:12}},[s("label",{staticClass:"el-form-item__label",staticStyle:{width:"80px"}},[e._v("CPU")]),e._v(" "),s("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"80px"}},[s("span",{staticStyle:{"margin-left":"10px"}},[e._v("intelAAACPU")])])]),e._v(" "),s("el-col",{attrs:{span:12}},[s("label",{staticClass:"el-form-item__label",staticStyle:{width:"80px"}},[e._v("CPU核数")]),e._v(" "),s("div",{staticClass:"el-form-item__content",staticStyle:{"margin-left":"80px"}},[s("span",{staticStyle:{"margin-left":"10px"}},[e._v("12核")])])])],1)],1)},[],!1,null,"b8d6a3ac",null);d.options.__file="form_base.vue";t.default=d.exports},qpgI:function(e,t,s){"use strict";s.d(t,"c",function(){return n}),s.d(t,"d",function(){return i}),s.d(t,"a",function(){return l}),s.d(t,"b",function(){return o});var a=s("t3Un");function n(e){return e?Object(a.a)({url:"api/device/list/?os_type="+e,method:"get"}):Object(a.a)({url:"api/device/list/",method:"get"})}function i(e){return Object(a.a)({url:"api/devices/"+e+"/",method:"get"})}function l(e){return Object(a.a)({url:"api/devices/"+e+"/",method:"delete"})}function o(e,t){return Object(a.a)({url:"api/devices/"+e+"/",method:"put",data:t})}},sTrS:function(e,t,s){},vnca:function(e,t,s){"use strict";var a=s("sTrS");s.n(a).a}}]);